{"title":"Node中间件","uid":"95c23f559d3556b23b5f7de5b6f172a9","slug":"node中间件","date":"2020-07-14T08:01:50.000Z","updated":"2021-11-30T09:05:29.725Z","comments":true,"path":"api/articles/node中间件.json","keywords":"node.js blogs IT 互联网 服务端 游戏 mysql redis","cover":null,"content":"<p>node中间件可以概括为在请求的过程中或者进程间通信过程中过滤，交给函数处理之前先交给他处理<br>比如用来做中间件的 body-parser  method-override  自己写的心跳及检测用户登录验证功能</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">app.use(&#39;&#x2F;&#39;,function(req,res,next)&#123;\n\n　　　　console.log(&#39;1&#39;);\n\n　　　　next();  &#x2F;&#x2F;重要代码\n\n&#125;</code></pre>\n<ol>\n<li>bodyParser.js 原理解析<br>判断请求为 post 请求，则进行解析。<br>因为是 post 请求，传输数据可能会很大，需要一点一点传。创建 postData 变量，存储在变量里面<br>使用 querystring模块解析post参数<br>将解析好的参数对象添加到req的属性中 req.body<br>执行下一个中间件 next()</li>\n<li>method-override<br>增加请求类型</li>\n<li>错误处理可以自定义一个中间件做最外层处理<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">app.use(&#39;&#x2F;&#39;, function(err,req,res,next)&#123;\n\nres.send(&#39;网络异常。。。&#39;) &#x2F;&#x2F;要改提示信息在这里改即可：res.send(&#39;网络异常，请稍后重试&#39;)\n\n&#125;</code></pre>\n\n</li>\n</ol>\n","text":"node中间件可以概括为在请求的过程中或者进程间通信过程中过滤，交给函数处理之前先交给他处理比如用来做中间件的 body-parser method-override 自己写的心跳及检测用户登录验证功能 app.use(&#39;&#x2F;&#39;,function(req,...","link":"","photos":[],"count_time":{"symbolsCount":584,"symbolsTime":"1 mins."},"categories":[{"name":"IT笔记","slug":"IT笔记","count":21,"path":"api/categories/IT笔记.json"}],"tags":[{"name":"node.js","slug":"node-js","count":7,"path":"api/tags/node-js.json"}],"toc":"","author":{"name":"Fly","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一个在夏天会被芒果砸到的城市靠写代码为生的前职业电竞选手","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Mongodb笔记","uid":"03ffe00e2e1072f20d7bd09de5fd3f01","slug":"mongodb笔记","date":"2020-07-28T04:54:03.000Z","updated":"2021-12-09T11:36:06.983Z","comments":true,"path":"api/articles/mongodb笔记.json","keywords":"node.js blogs IT 互联网 服务端 游戏 mysql redis","cover":null,"text":"下载地址：https://www.mongodb.com/download-center#community 解压sudo tar -zxvf mongodb-osx-ssl-x86_64-4.0.9.tgzexport PATH=/usr/local/mongodb/bin:$...","link":"","photos":[],"count_time":{"symbolsCount":"3.6k","symbolsTime":"3 mins."},"categories":[{"name":"IT笔记","slug":"IT笔记","count":21,"path":"api/categories/IT笔记.json"}],"tags":[{"name":"mongodb","slug":"mongodb","count":1,"path":"api/tags/mongodb.json"}],"author":{"name":"Fly","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一个在夏天会被芒果砸到的城市靠写代码为生的前职业电竞选手","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Python学习笔记","uid":"d0c8d2c20d89823379ca4a9355ecc003","slug":"python学习笔记","date":"2020-07-09T08:20:08.000Z","updated":"2021-11-30T09:05:42.641Z","comments":true,"path":"api/articles/python学习笔记.json","keywords":"node.js blogs IT 互联网 服务端 游戏 mysql redis","cover":null,"text":"1.遇到的问题SyntaxError: Non-ASCII character ‘\\xe4’#-- coding: utf-8 -- 或者 #coding=utf-8 mac上的环境变量open ~/.bash_profile中加入如下然后保存 source ~/.bash_pr...","link":"","photos":[],"count_time":{"symbolsCount":790,"symbolsTime":"1 mins."},"categories":[{"name":"IT笔记","slug":"IT笔记","count":21,"path":"api/categories/IT笔记.json"}],"tags":[{"name":"python","slug":"python","count":1,"path":"api/tags/python.json"}],"author":{"name":"Fly","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一个在夏天会被芒果砸到的城市靠写代码为生的前职业电竞选手","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}