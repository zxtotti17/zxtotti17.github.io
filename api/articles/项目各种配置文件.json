{"title":"项目各种配置文件","uid":"bc2c9c727d9ddd92863bc97ef0485ad6","slug":"项目各种配置文件","date":"2018-07-31T08:43:21.000Z","updated":"2021-11-30T09:06:31.734Z","comments":true,"path":"api/articles/项目各种配置文件.json","keywords":"node.js blogs IT 互联网 服务端 游戏 mysql redis","cover":null,"content":"<ol>\n<li><p>srpg.conf</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">server &#123;\n    listen 80;\n    listen 443 ssl;\n#    server_name alctwobt.ssl.91dena.cn;\n    server_name alccn2-release.ssl.91dena.cn;\n#    ssl on;\n    ssl_certificate &#x2F;root&#x2F;cert&#x2F;91dena_cn.pem;\n    ssl_certificate_key &#x2F;root&#x2F;cert&#x2F;91dena_cn.key;\n\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header Host $http_host;\n\n    ## APP  11\n    location &#x2F; &#123;\n        # proxy\n        proxy_pass http:&#x2F;&#x2F;127.0.0.1:5000&#x2F;;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        # connect to backend with keepalives\n\n        proxy_http_version 1.1;\n        proxy_set_header Connection &quot;&quot;;\n        proxy_send_timeout 30s;\n        proxy_read_timeout 60s;\n        proxy_connect_timeout 30s;\n    &#125;\n    access_log  &#x2F;home&#x2F;log&#x2F;nginxlog&#x2F;cnrelease&#x2F;alccn2.ssl.91dena.cn.access.log main;\n    error_log   &#x2F;home&#x2F;log&#x2F;nginxlog&#x2F;cnrelease&#x2F;alccn2.ssl.91dena.cn.error.log;\n&#125;</code></pre>\n<p><a href=\"/download/nginx.conf\">点击下载</a></p>\n<span id=\"more\"></span>\n</li>\n<li><p>nginx</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">user nginx;\n\nworker_processes  auto;\nworker_rlimit_nofile 150000;\n\nerror_log   &#x2F;tmp&#x2F;error.log;\n\nevents &#123;\n    worker_connections  65535;\n    multi_accept on ;\n\n&#125;\n\n\nhttp &#123;\n    include mime.types;\n    default_type  application&#x2F;octet-stream;\n    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; $request_time&#39;\n                      &#39; $status $body_bytes_sent &quot;$http_referer&quot; &#39;\n                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;  $upstream_response_time&#39;;\n    access_log  &#x2F;tmp&#x2F;access.log;\n    sendfile        on;\n    tcp_nopush      on;\n    keepalive_timeout  120;\n\n    gzip  on;\n    \ninclude &#x2F;etcinx&#x2F;title&#x2F;*.conf;\n\n&#125;</code></pre>\n<p><a href=\"/download/nginx.conf\">点击下载</a></p>\n</li>\n<li><p>srpg-app</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">#!&#x2F;bin&#x2F;bash\n### BEGIN INIT INFO\n# Provides:             webapp\n# Required-Start:       $syslog $remote_fs\n# Required-Stop:        $syslog $remote_fs\n# Should-Start:         $local_fs\n# Should-Stop:          $local_fs\n# Default-Start:        2 3 4 5\n# Default-Stop:         0 1 6\n# Short-Description:    Alchemist Webapp\n# Description:          Alchemist Webapp\n### END INIT INFO\n#\n### BEGIN CHKCONFIG INFO\n# chkconfig: 2345 55 25\n# description: Alchemist Webapp\n### END CHKCONFIG INFO\n\nUSER&#x3D;&quot;webapp&quot;\nNAME&#x3D;&quot;webapp&quot;\nNODE_ENV&#x3D;&quot;production&quot;\nNODE_BIN_DIR&#x3D;&quot;&#x2F;usr&#x2F;localde&#x2F;bin&quot;\nNODE_PATH&#x3D;&quot;&#x2F;usr&#x2F;localdebde_modules&quot;\nAPPLICATION_PATH&#x3D;&quot;ar&#x2F;webapps&#x2F;alchemist&#x2F;currentde&#x2F;app&#x2F;app.js&quot;\nAPPLICATION_WORKDIR&#x3D;&quot;ar&#x2F;webapps&#x2F;alchemist&#x2F;currentde&#x2F;app&#x2F;&quot;\nAPPLICATION_OPTION&#x3D;&quot;&quot;\nLOGFILE&#x3D;&quot;ar&#x2F;webapps&#x2F;alchemist&#x2F;log&#x2F;forever&#x2F;app.log&quot;\nMIN_UPTIME&#x3D;&quot;5000&quot;\nSPIN_SLEEP_TIME&#x3D;&quot;10000&quot;\n\nPATH&#x3D;$NODE_BIN_DIR:$PATH\n\nexport NODE_PATH&#x3D;$NODE_PATH\n\nstart() &#123;\n    echo &#96;runuser -l &quot;$USER&quot; -c &quot;forever list&quot;&#96; | grep -q &quot;$APPLICATION_PATH&quot;\n    if [ &quot;$?&quot; -eq &quot;0&quot; ]; then\n        echo &quot;$NAME is already running.&quot;\n        RETVAL&#x3D;0\n    else\n        echo &quot;Starting $NAME&quot;\n        runuser -l &quot;$USER&quot; -c &quot;\\\n        export NODE_ENV&#x3D;$NODE_ENV &amp;&amp;\n        forever \\\n        -a \\\n        -l $LOGFILE \\\n        --minUptime $MIN_UPTIME \\\n        --spinSleepTime $SPIN_SLEEP_TIME \\\n        --workingDir $APPLICATION_WORKDIR \\\n        start $APPLICATION_PATH $APPLICATION_OPTION&quot; 2&gt;&amp;1 &gt; &#x2F;dev&#x2F;null &amp;\n        RETVAL&#x3D;$?\n    fi\n&#125;\n\nstop() &#123;\n    echo &#96;runuser -l &quot;$USER&quot; -c &quot;forever list&quot;&#96; | grep -q &quot;$APPLICATION_PATH&quot;\n    if [ &quot;$?&quot; -eq &quot;0&quot; ]; then\n        echo &quot;Shutting down $NAME&quot;\n        # Tell Forever to stop the process.\n        runuser -l &quot;$USER&quot; -c &quot;forever stop $APPLICATION_PATH&quot; 2&gt;&amp;1 &gt; &#x2F;dev&#x2F;null\n        RETVAL&#x3D;$?\n    else\n        echo &quot;$NAME is not running.&quot;\n        RETVAL&#x3D;0\n    fi\n&#125;\n\nrestart() &#123;\n    stop\n    start\n&#125;\n\nstatus() &#123;\n    echo &#96;runuser -l &quot;$USER&quot; -c &quot;forever list&quot;&#96; | grep -q &quot;$APPLICATION_PATH&quot;\n    if [ &quot;$?&quot; -eq &quot;0&quot; ]; then\n        echo &quot;$NAME is running.&quot;\n        RETVAL&#x3D;0\n    else\n        echo &quot;$NAME is not running.&quot;\n        RETVAL&#x3D;3\n    fi\n&#125;\n\ncase &quot;$1&quot; in\n    start)\n        start\n        ;;\n    stop)\n        stop\n        ;;\n    status)\n        status\n        ;;\n    restart)\n        restart\n        ;;\n    *)\n        echo &quot;Usage: &#123;start|stop|status|restart&#125;&quot;\n        exit 1\n        ;;\nesac\nexit $RETVAL</code></pre>\n<p><a href=\"/download/srpg-app\">点击下载</a></p>\n</li>\n<li><p>td-agent</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">####\n## Output descriptions:\n##\n\n# Treasure Data (http:&#x2F;&#x2F;www.treasure-data.com&#x2F;) provides cloud based data\n# analytics platform, which easily stores and processes data from td-agent.\n# FREE plan is also provided.\n# @see http:&#x2F;&#x2F;docs.fluentd.org&#x2F;articles&#x2F;http-to-td\n#\n# This section matches events whose tag is td.DATABASE.TABLE\n&lt;match td.*.*&gt;\n  @type tdlog\n  apikey YOUR_API_KEY\n\n  auto_create_table\n  buffer_type file\n  buffer_path &#x2F;var&#x2F;log&#x2F;td-agent&#x2F;buffer&#x2F;td\n\n  &lt;secondary&gt;\n    @type file\n    path &#x2F;var&#x2F;log&#x2F;td-agent&#x2F;failed_records\n  &lt;&#x2F;secondary&gt;\n&lt;&#x2F;match&gt;\n\n## match tag&#x3D;debug.** and dump to console\n&lt;match debug.**&gt;\n  @type stdout\n&lt;&#x2F;match&gt;\n\n####\n## Source descriptions:\n##\n\n## built-in TCP input\n## @see http:&#x2F;&#x2F;docs.fluentd.org&#x2F;articles&#x2F;in_forward\n&lt;source&gt;\n  @type forward\n&lt;&#x2F;source&gt;\n\n## built-in UNIX socket input\n#&lt;source&gt;\n#  @type unix\n#&lt;&#x2F;source&gt;\n\n# HTTP input\n# POST http:&#x2F;&#x2F;localhost:8888&#x2F;&lt;tag&gt;?json&#x3D;&lt;json&gt;\n# POST http:&#x2F;&#x2F;localhost:8888&#x2F;td.myapp.login?json&#x3D;&#123;&quot;user&quot;%3A&quot;me&quot;&#125;\n# @see http:&#x2F;&#x2F;docs.fluentd.org&#x2F;articles&#x2F;in_http\n&lt;source&gt;\n  @type http\n  port 8888\n&lt;&#x2F;source&gt;\n\n## live debugging agent\n&lt;source&gt;\n  @type debug_agent\n  bind 127.0.0.1\n  port 24230\n&lt;&#x2F;source&gt;\n\n####\n## Examples:\n##\n\n## File input\n## read apache logs continuously and tags td.apache.access\n#&lt;source&gt;\n#  @type tail\n#  format apache\n#  path &#x2F;var&#x2F;log&#x2F;httpd-access.log\n#  tag td.apache.access\n#&lt;&#x2F;source&gt;\n\n## File output\n## match tag&#x3D;local.** and write to file\n#&lt;match local.**&gt;\n#  @type file\n#  path &#x2F;var&#x2F;log&#x2F;td-agent&#x2F;access\n#&lt;&#x2F;match&gt;\n\n## Forwarding\n## match tag&#x3D;system.** and forward to another td-agent server\n#&lt;match system.**&gt;\n#  @type forward\n#  host 192.168.0.11\n#  # secondary host is optional\n#  &lt;secondary&gt;\n#    host 192.168.0.12\n#  &lt;&#x2F;secondary&gt;\n#&lt;&#x2F;match&gt;\n\n## Multiple output\n## match tag&#x3D;td.*.* and output to Treasure Data AND file\n#&lt;match td.*.*&gt;\n#  @type copy\n#  &lt;store&gt;\n#    @type tdlog\n#    apikey API_KEY\n#  auto_create_table\n#    buffer_type file\n#    buffer_path &#x2F;var&#x2F;log&#x2F;td-agent&#x2F;buffer&#x2F;td\n#  &lt;&#x2F;store&gt;\n#  &lt;store&gt;\n#    @type file\n#    path &#x2F;var&#x2F;log&#x2F;td-agent&#x2F;td-%Y-%m-%d&#x2F;%H.log\n#  &lt;&#x2F;store&gt;\n#&lt;&#x2F;match&gt;\n#&lt;match *.**&gt;\n#  type file\n#   path &#x2F;var&#x2F;log&#x2F;td-agent&#x2F;error.log\n#&lt;&#x2F;match&gt;\n\n&lt;match alchemist.**&gt;\n  type forward\n  heartbeat_type tcp\n  buffer_type file\n  buffer_path &#x2F;var&#x2F;tmp&#x2F;td-agent&#x2F;forward.*.buffer\n  buffer_chunk_limit 8m     # チャンクサイズ\n  buffer_queue_limit 256    # 1queueに保存できるchunk数の上限\n  flush_interval 1s        # 10秒に1回送信\n  flush_at_shutdown true    # シャットダウン時にチャンクを処理するか?(ファイルバッファのみ有効)\n  retry_wait 5s            # 再送実施までの待ち時間\n  retry_limit 2             # 再送実施回数\n  require_ack_response true\n  expire_dns_cache 0\n  dns_round_robin true\n\n  &lt;server&gt;\n    host mongodb.alccn.91dena.cn\n    port 24224\n  &lt;&#x2F;server&gt;\n\n  # ログ送信失敗時のファイル\n  #  # &lt;secondary&gt;\n  #      #  type file\n  #         #   path &#x2F;var&#x2F;log&#x2F;td-agent&#x2F;failed&#x2F;forward-failed\n  #           #&lt;&#x2F;secondary&gt;\n &lt;&#x2F;match&gt;</code></pre>\n<p><a href=\"/download/td-agent.conf\">点击下载</a></p>\n</li>\n</ol>\n","text":" srpg.conf server &#123; listen 80; listen 443 ssl; # server_name alctwobt.ssl.91dena.cn; server_name alccn2-release.ssl.91dena.cn; # ssl on...","link":"","photos":[],"count_time":{"symbolsCount":"8.5k","symbolsTime":"8 mins."},"categories":[{"name":"脚本工具","slug":"脚本工具","count":3,"path":"api/categories/脚本工具.json"}],"tags":[{"name":"nginx","slug":"nginx","count":1,"path":"api/tags/nginx.json"},{"name":"td-agent","slug":"td-agent","count":1,"path":"api/tags/td-agent.json"}],"toc":"","author":{"name":"Fly","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一个在夏天会被芒果砸到的城市靠写代码为生的前职业电竞选手","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"翻译提取替换","uid":"1537605682febdfac8db68bbbd2d14a8","slug":"翻译提取替换","date":"2018-08-03T03:02:18.000Z","updated":"2021-11-30T08:58:03.986Z","comments":true,"path":"api/articles/翻译提取替换.json","keywords":"node.js blogs IT 互联网 服务端 游戏 mysql redis","cover":[],"text":" 提取提取客户端资源文件之前先要用uc-utf8.php转utf-8 把unicode码转成utf-8的日文在提取将要提取文字的文件整合与getFromHtml.sh 放在同目录下#!&#x2F;bin&#x2F;bash #sh getFromHtml.sh under the...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"脚本工具","slug":"脚本工具","count":3,"path":"api/categories/脚本工具.json"}],"tags":[{"name":"游戏","slug":"游戏","count":8,"path":"api/tags/游戏.json"}],"author":{"name":"Fly","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一个在夏天会被芒果砸到的城市靠写代码为生的前职业电竞选手","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"ALC_Sentry","uid":"325a758ec467f97d0caf0311703869d6","slug":"ALC-Sentry","date":"2018-07-24T08:06:55.000Z","updated":"2019-11-27T15:26:48.000Z","comments":true,"path":"api/articles/ALC-Sentry.json","keywords":"node.js blogs IT 互联网 服务端 游戏 mysql redis","cover":[],"text":"1) 安装环境执行命令创建名为sentry的数据库createdb -E utf-8 sentry为sentry项目初始化数据sentry –config=/.sentry/sentry.conf.py upgrade创建新用户sentry –config=/.sentry/se...","link":"","photos":[],"count_time":{"symbolsCount":792,"symbolsTime":"1 mins."},"categories":[{"name":"开发环境安装","slug":"开发环境安装","count":2,"path":"api/categories/开发环境安装.json"}],"tags":[{"name":"Sentry","slug":"Sentry","count":1,"path":"api/tags/Sentry.json"}],"author":{"name":"Fly","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一个在夏天会被芒果砸到的城市靠写代码为生的前职业电竞选手","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}