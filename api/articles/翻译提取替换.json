{"title":"翻译提取替换","uid":"1537605682febdfac8db68bbbd2d14a8","slug":"翻译提取替换","date":"2018-08-03T03:02:18.000Z","updated":"2021-11-30T08:58:03.986Z","comments":true,"path":"api/articles/翻译提取替换.json","keywords":"node.js blogs IT 互联网 服务端 游戏 mysql redis","cover":[],"content":"<ol>\n<li>提取<br>提取客户端资源文件之前先要用uc-utf8.php转utf-8 把unicode码转成utf-8的日文在提取<br>将要提取文字的文件整合与getFromHtml.sh 放在同目录下<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">#!&#x2F;bin&#x2F;bash\n#sh getFromHtml.sh under the template fold\n#Change filelist.csv to excel file, and give it to translator\n\nLANG&#x3D;C grep -r -n -v &#39;^[[:cntrl:][:print:]]*$&#39; . | grep -v &quot;using UnityEngine;&quot; | grep -v svn | grep -v &#x2F;&#x2F;  | grep -v \\* |  grep -v &quot;\\&#123;\\*&quot; |  grep -v &quot;\\&quot;Name\\&quot;&quot; &gt; ~&#x2F;lj_2_3_server.csv\n\nsed -i &#39;s@\\t@ @g&#39; ~&#x2F;lj_2_3_server.csv\nsed -i &#39;s@\\([^:]*\\):\\([0-9]*\\):@\\1\\t\\2\\t@&#39; ~&#x2F;lj_2_3_server.csv</code></pre>\n<a href=\"/download/getFromHtml.sh\">点击下载</a><span id=\"more\"></span>\n\n</li>\n</ol>\n<p>可以脚本文件内修改输出路径及文件名<br>运行命令提取内容<br>sh getFromHtml</p>\n<p>取出后的excel先在编辑软件里打开编码改成ansi, 否则直接excel打开会乱码<br>在excel内，全选，点击数据-&gt;分列-&gt;分隔符号-&gt;Tab键-&gt;确定。。。。以Tab键分割内容<br>完成后的数据格式如下：(A列为行数，B列为行号，C列为提取的原字符)<br><img src=\"/post/A46180F494E722BBE7AB60D25E81DD0B.jpg\" alt=\"A46180F494E722BBE7AB60D25E81DD0B\"><br>如果有发现提取到不需要翻译的错误的，可直接整行删除。。。<br>提交翻译</p>\n<ol start=\"2\">\n<li>替换<br>翻译后的文件如果为xls，在最后另起一列，用公式=A1&amp;”^”&amp;B1&amp;”^”&amp;C1连接，拖到底，用连接的主要目的是让文件、行、数据之间有个特殊的符号分割<br>^ 这个符号基本见不到所以用这个，将最后列的数据拷贝到sublime，替换”^ “ 为 “^”去掉多余的数据与行之间的一个空格，然后将\\替换为@@@或者奇怪<br>不重复的符号，如果不替换转换会被转换掉，最后将sublime上的代码考到新建的一个txt中另存为utf-8，上传到服务器对应的目录下面，修改<br>changeHtml.sh这个文件中判断中间的分割符号保存，整个文件权限777.</li>\n</ol>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">#!&#x2F;bin&#x2F;bash\n#sh changeHtml.sh  result_file\n#result_file&#39; content\n#file&#39;s path    line_no old_content     new_content\n\nfile&#x3D;$1\n\nif [ -z $file ]\nthen\n        echo &quot;Input result_file&quot;\n        exit\nfi\n\nwhile read line\ndo\n        IFS&#x3D;&quot;^&quot;\n        arr&#x3D;($line)\n        filename&#x3D;$&#123;arr[0]&#125;\n        line_num&#x3D;$&#123;arr[1]&#125;\n        str_kr&#x3D;$&#123;arr[2]&#125;\n\n        if [ $str_kr ]\n        then\n        echo $filename\n        echo $line_num\n        echo $str_kr\n\n                sed -i &#39;&#39;$line_num&#39; c\\&#39;$str_kr&#39;&#39;  $filename\n        else\n                echo $line\n        fi\ndone &lt; $file</code></pre>\n<p>运行命令替换内容<br>sh changeHtml.sh text.txt </p>\n<p>运行完.asset的文件是没办法替换的，要手动自行替换</p>\n<p>text.txt数据格式如下<br><img src=\"/post/326AD4E2572831FEFC87D564932D6106.jpg\" alt=\"326AD4E2572831FEFC87D564932D6106\"><br><a href=\"/download/changeHtml.sh\">点击下载</a>       </p>\n","text":" 提取提取客户端资源文件之前先要用uc-utf8.php转utf-8 把unicode码转成utf-8的日文在提取将要提取文字的文件整合与getFromHtml.sh 放在同目录下#!&#x2F;bin&#x2F;bash #sh getFromHtml.sh under the...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"脚本工具","slug":"脚本工具","count":3,"path":"api/categories/脚本工具.json"}],"tags":[{"name":"游戏","slug":"游戏","count":8,"path":"api/tags/游戏.json"}],"toc":"","author":{"name":"Fly","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一个在夏天会被芒果砸到的城市靠写代码为生的前职业电竞选手","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Node笔记","uid":"5d576bc5d97b72bd5c880644e758fd3d","slug":"node笔记","date":"2018-08-21T09:04:37.000Z","updated":"2021-11-30T09:05:19.236Z","comments":true,"path":"api/articles/node笔记.json","keywords":"node.js blogs IT 互联网 服务端 游戏 mysql redis","cover":null,"text":"第一章 node简介1.1 node的特点 1.1.1 异步I/O 绝大多数操作以异步方式进行调用 1.1.2 事件与回调函数 1.1.3 单线程，但是可以用WebWorkers的方式解决单线程的问题（子进程），用Master-Worker用master统一管理子进程 1.1.4...","link":"","photos":[],"count_time":{"symbolsCount":"18k","symbolsTime":"16 mins."},"categories":[{"name":"IT笔记","slug":"IT笔记","count":21,"path":"api/categories/IT笔记.json"}],"tags":[{"name":"node.js","slug":"node-js","count":7,"path":"api/tags/node-js.json"}],"author":{"name":"Fly","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一个在夏天会被芒果砸到的城市靠写代码为生的前职业电竞选手","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"项目各种配置文件","uid":"bc2c9c727d9ddd92863bc97ef0485ad6","slug":"项目各种配置文件","date":"2018-07-31T08:43:21.000Z","updated":"2021-11-30T09:06:31.734Z","comments":true,"path":"api/articles/项目各种配置文件.json","keywords":"node.js blogs IT 互联网 服务端 游戏 mysql redis","cover":null,"text":" srpg.conf server &#123; listen 80; listen 443 ssl; # server_name alctwobt.ssl.91dena.cn; server_name alccn2-release.ssl.91dena.cn; # ssl on...","link":"","photos":[],"count_time":{"symbolsCount":"8.5k","symbolsTime":"8 mins."},"categories":[{"name":"脚本工具","slug":"脚本工具","count":3,"path":"api/categories/脚本工具.json"}],"tags":[{"name":"nginx","slug":"nginx","count":1,"path":"api/tags/nginx.json"},{"name":"td-agent","slug":"td-agent","count":1,"path":"api/tags/td-agent.json"}],"author":{"name":"Fly","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一个在夏天会被芒果砸到的城市靠写代码为生的前职业电竞选手","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}